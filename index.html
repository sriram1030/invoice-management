<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Invoice Management System</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@100..1000&display=swap" rel="stylesheet">
</head>
<body>

    <!-- First Section -->
<div class="container-fluid p-3">
    <div class="row">
        <div class="col-md-3 p-3 box me-4" id="col-1">  
            <h1 style="font-size: 28px;">Grafikos Invoice Management System</h1>
        </div>
        <div class="col-md-8 p-3 box d-flex" id="col-2">  
            <h1 id="totalClients">Total Clients - 0</h1>
            <h1 id="totalInvoices">Total Invoices - 0</h1>
        </div>
    </div>
</div>

   <!-- Second Section: Clients and Invoices -->
<div class="container-fluid p-3">
    <div class="row">
        <div class="col-md-3 box me-4" id="col-3">  
            <button class="btn btn-primary mt-3 mb-3" id="addClientBtn" data-bs-toggle="modal" data-bs-target="#addClientModal" aria-label="Add a new client">Add a Client</button>
            <ul class="list-group clients-list" id="clientsList"></ul>
        </div>
        <div class="col-md-8 box" id="col-4">  
            <h2>Invoices</h2>
            <button class="btn btn-success mb-3 me-2" id="addInvoiceBtn" data-bs-toggle="modal" data-bs-target="#addInvoiceModal">Add Invoice</button>
            <button class="btn btn-secondary mb-3" id="showAllInvoicesBtn">Show All Invoices</button>
            <table class="table table-striped table-hover" id="invoicesTable">
                <thead>
                    <tr>
                        <th scope="col">Invoice No.</th> <!-- Changed from "ID" -->
                        <th scope="col">Client</th>
                        <th scope="col">Invoice Date</th>
                        <th scope="col">Status</th>
                        <th scope="col">Actions</th>
                    </tr>
                </thead>
                <tbody id="invoicesTableBody">
                    <!-- Invoices will be populated here -->
                </tbody>
            </table>
        </div>
    </div>
</div>

    <!-- Modal for Adding Client -->
    <div class="modal fade" id="addClientModal" tabindex="-1" aria-labelledby="addClientModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-md">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addClientModalLabel">Add Client</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="clientForm">
                        <div class="mb-3">
                            <label for="clientName" class="form-label">Client Name</label>
                            <input type="text" class="form-control" id="clientName" required>
                        </div>
                        <div class="mb-3">
                            <label for="clientEmail" class="form-label">Client Email</label>
                            <input type="email" class="form-control" id="clientEmail" required>
                        </div>
                        <div class="mb-3">
                            <label for="clientAddress" class="form-label">Client Address</label>
                            <textarea class="form-control" id="clientAddress" rows="3" required></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary">Add Client</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for Adding Invoice -->
    <div class="modal fade" id="addInvoiceModal" tabindex="-1" aria-labelledby="addInvoiceModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addInvoiceModalLabel">Add Invoice</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="addInvoiceModal">
                        <div class="row">
                            <div class="col-md-6">
                                <p><strong>From:</strong><br>
                                Grafikos<br>
                                Basement Plot 27, Srinivasa Nagar<br>
                                OMR Kottivakkam<br>
                                Chennai, Tamilnadu, 600041<br>
                                India<br>
                                GSTIN: 33AGXPV873G2ZB</p>
                            </div>
                            <div class="col-md-6 text-end">
                                <p><strong>Invoice No.:</strong> <span id="invoiceNumber">Auto Generated</span></p>
                                <p><strong>Date:</strong> <input type="date" id="date" required></p>
                                <p><strong>Invoice Due:</strong> <input type="date" id="dueDate" required></p>
                            </div>
                        </div>
                        <div class="row mt-3">
                            <div class="col-md-12">
                                <div class="mb-3">
                                    <label for="toAddress" class="form-label">To:</label>
                                    <p id="toAddress"></p>
                                </div>
                            </div>
                        </div>
                        <div class="row mt-3">
                            <div class="col-md-12">
                                <div class="mb-3">
                                    <label for="itemsTable" class="form-label">Items</label>
                                    <table class="table table-bordered" id="itemsTable">
                                        <thead>
                                            <tr>
                                                <th>Description</th>
                                                <th>Quantity</th>
                                                <th>Rate</th>
                                                <th>Amount</th>
                                                <th>Action</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr id="itemRowTemplate" style="display: none;">
                                                <td><input type="text" class="form-control item-description" ></td>
                                                <td><input type="number" class="form-control item-quantity" ></td>
                                                <td><input type="number" step="0.01" class="form-control item-rate" ></td>
                                                <td><span class="item-amount">INR 0.00</span></td>
                                                <td><button type="button" class="btn btn-danger remove-item">Remove</button></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    <button type="button" class="btn btn-primary mb-3" id="addItemBtn">Add Item</button>
                                </div>
                            </div>
                        </div>
                        <div class="row mt-3">
                            <div class="col-md-6 offset-md-6 text-end">
                                <p><strong>Sub Total:</strong> <span id="subTotal">INR 0.00</span></p>
                                <p><strong>CGST (9%):</strong> <span id="cgst">INR 180.00</span></p>
                                <p><strong>SGST (9%):</strong> <span id="sgst">INR 180.00</span></p>
                                <p><strong>Tax Total:</strong> <span id="taxTotal">INR 360.00</span></p>
                                <p><strong>Total:</strong> <span id="total">INR 0.00</span></p>
                                <p><strong>Balance:</strong> <span id="balance">INR 0.00</span></p>
                            </div>
                        </div>
                        <div class="row mt-3">
                            <div class="col">
                                <p><strong>BANK DETAILS:</strong><br>
                                GRAFIKOS<br>
                                A/C No. 158500202082424,<br>
                                Tamilnad Mercantile Bank Ltd,<br>
                                Chennai-Thiruvanmiyur Branch,<br>
                                IFSC Code: TMBL0000158,<br>
                                MICR Code: 600060010.</p>
                            </div>
                        </div>
                        <div class="row mt-3">
                            <div class="col text-center">
                                <button type="submit" class="btn btn-primary">Submit Invoice</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for Editing Invoice -->
    <div class="modal fade" id="editInvoiceModal" tabindex="-1" aria-labelledby="editInvoiceModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editInvoiceModalLabel">Edit Invoice</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="editInvoiceForm">
                        <div class="row">
                            <div class="col-md-6">
                                <p><strong>From:</strong><br>
                                Grafikos<br>
                                Basement Plot 27, Srinivasa Nagar<br>
                                OMR Kottivakkam<br>
                                Chennai, Tamilnadu, 600041<br>
                                India<br>
                                GSTIN: 33AGXPV873G2ZB</p>
                            </div>
                            <div class="col-md-6 text-end">
                                <p><strong>Invoice No.:</strong> <span id="editInvoiceNumber"></span></p>
                                <p><strong>Date:</strong> <input type="date" id="editDate" class="form-control" required></p>
                                <p><strong>Invoice Due:</strong> <input type="date" id="editDueDate" class="form-control" required></p>
                            </div>
                        </div>
                        <div class="row mt-3">
                            <div class="col-md-12">
                                <div class="mb-3">
                                    <label for="editToAddress" class="form-label">To:</label>
                                    <p id="editToAddress"></p>
                                </div>
                            </div>
                        </div>
                        <div class="row mt-3">
                            <div class="col-md-12">
                                <div class="mb-3">
                                    <label for="editItemsTable" class="form-label">Items</label>
                                    <table class="table table-bordered" id="editItemsTable">
                                        <thead>
                                            <tr>
                                                <th>Description</th>
                                                <th>Quantity</th>
                                                <th>Rate</th>
                                                <th>Amount</th>
                                                <th>Action</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr id="editItemRowTemplate" style="display: none;">
                                                <td><input type="text" class="form-control item-description" ></td>
                                                <td><input type="number" class="form-control item-quantity" ></td>
                                                <td><input type="number" step="0.01" class="form-control item-rate" ></td>
                                                <td><span class="item-amount">INR 0.00</span></td>
                                                <td><button type="button" class="btn btn-danger remove-item">Remove</button></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    <button type="button" class="btn btn-primary mb-3" id="editAddItemBtn">Add Item</button>
                                </div>
                            </div>
                        </div>
                        <div class="row mt-3">
                            <div class="col-md-6 offset-md-6 text-end">
                                <p><strong>Sub Total:</strong> <span id="editSubTotal">INR 0.00</span></p>
                                <p><strong>CGST (9%):</strong> <span id="editCgst">INR 180.00</span></p>
                                <p><strong>SGST (9%):</strong> <span id="editSgst">INR 180.00</span></p>
                                <p><strong>Tax Total:</strong> <span id="editTaxTotal">INR 360.00</span></p>
                                <p><strong>Total:</strong> <span id="editTotal">INR 0.00</span></p>
                                <p><strong>Balance:</strong> <span id="editBalance">INR 0.00</span></p>
                            </div>
                        </div>
                        <div class="row mt-3">
                            <div class="col">
                                <p><strong>BANK DETAILS:</strong><br>
                                GRAFIKOS<br>
                                A/C No. 158500202082424,<br>
                                Tamilnad Mercantile Bank Ltd,<br>
                                Chennai-Thiruvanmiyur Branch,<br>
                                IFSC Code: TMBL0000158,<br>
                                MICR Code: 600060010.</p>
                            </div>
                        </div>
                        <div class="row mt-3">
                            <div class="col text-center">
                                <button type="submit" class="btn btn-primary">Save Changes</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>
    <script type="module" src="script.js"></script>
</body>
</html>